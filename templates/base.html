{% load blog_tags %}
{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0b0d12" />

  <title>{% block title %}CYMOE{% endblock %}</title>

  <link rel="stylesheet" href="{% static 'css/base.css' %}">
  {% block extra_css %}{% endblock %}
</head>
<body>

  <header class="site-header" id="siteHeader">
    <div class="container header-inner">
      <a class="brand" href="{% url 'blog:index' %}" aria-label="На главную">
        <img class="brand-logo" src="{% static 'img/logo.png' %}" alt="CYMOE logo" />
        <span class="brand-name">CYMOE</span>
      </a>

      <nav class="nav" aria-label="Главная навигация">
      {% if request.user.is_authenticated %}  
        <a class="nav-link" href="{% url 'blog:create_note' %}">Создать запись</a>
        <a class="nav-link" href="{% url 'blog:view_note' %}">Просмотреть записи</a>
        <a class="nav-link" href="{% url 'blog:user_note' %}">Мои записи</a>
      {% else %}
        <a class="nav-link" href="{% url 'blog:register' %}">Создать запись</a>
        <a class="nav-link" href="{% url 'blog:register' %}">Просмотреть записи</a>
        <a class="nav-link" href="{% url 'blog:register' %}">Мои записи</a>
      {% endif %}
        {% if request.user.is_authenticated %}
          <a class="nav-link nav-link--ghost" href="{% url 'blog:profile' user.username %}">Профиль</a>
          <a class="nav-link nav-link--ghost" href="{% url 'blog:logout_user' %}">Выход</a>
        {% else %}
          <a class="nav-link nav-link--ghost" href="{% url 'blog:register' %}">Регистрация</a>
          <a class="nav-link nav-link--accent" href="{% url 'blog:login_user' %}">Вход</a>
        {% endif %}
      </nav>

      <button class="burger" id="burgerBtn" aria-label="Открыть меню" aria-expanded="false">
        <span class="burger-line"></span>
        <span class="burger-line"></span>
        <span class="burger-line"></span>
      </button>
    </div>

    <div class="mobile-menu" id="mobileMenu" aria-hidden="true">
      <div class="container mobile-menu-inner">
      {% if request.user.is_authenticated %}
        <a class="mobile-link" href="{% url 'blog:create_note' %}">Создать запись</a>
        <a class="mobile-link" href="{% url 'blog:view_note' %}">Просмотреть записи</a>
        <a class="mobile-link" href="{% url 'blog:user_note' %}">Мои записи</a>
      {% else %}
        <a class="mobile-link" href="{% url 'blog:register' %}">Создать запись</a>
        <a class="mobile-link" href="{% url 'blog:register' %}">Просмотреть записи</a>
        <a class="mobile-link" href="{% url 'blog:register' %}">Мои записи</a>
      {% endif %}
        <div class="mobile-split"></div>

        {% if request.user.is_authenticated %}
          <a class="mobile-link mobile-link--ghost" href="{% url 'blog:profile' user.username %}">Профиль</a>
          <a class="mobile-link mobile-link--ghost" href="{% url 'blog:logout_user' %}">Выход</a>
        {% else %}
          <a class="mobile-link mobile-link--ghost" href="{% url 'blog:register' %}">Регистрация</a>
          <a class="mobile-link mobile-link--accent" href="{% url 'blog:login_user' %}">Вход</a>
        {% endif %}
      </div>
    </div>
  </header>

  <main class="site-main">
    <div class="container">
      {% block content %}{% endblock %}
    </div>
  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <div class="footer-left">
        <div class="footer-title">CYMOE</div>
        <div class="footer-text">
          <p class="footer-description">Сайт разработан для помощи людям. Здесь можно анонимно высказываться и выпускать эмоции.</p>
          <p class="footer-stats">В целом было написано: <span class="footer-stats-value">{% total_posts %}</span> постов</p>
          {% show_latest_posts 3 %}
          <h3 class="footer-list-title">Most commented posts</h3>
          {% get_most_commented_posts as most_commented_posts %}
          <ul class="footer-posts-list footer-posts-list--commented">
            {% for post in most_commented_posts %}
              <li>
                <a href="{{ post.get_absolute_url }}">{{ post.title }}</a>
              </li>
            {% endfor %}
          </ul>
        </div>
        <div class="footer-rights">© <span id="year"></span> CYMOE. Все права защищены.</div>
      </div>

      <div class="footer-right">
        <div class="social">
          <a class="social-link" href="https://instagram.com/dev_coder22" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
            <svg viewBox="0 0 24 24" class="icon" aria-hidden="true">
              <path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm10 2H7a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zm-5 4a6 6 0 1 1 0 12 6 6 0 0 1 0-12zm0 2a4 4 0 1 0 0 8 4 4 0 0 0 0-8zm6.2-2.6a1.1 1.1 0 1 1-2.2 0 1.1 1.1 0 0 1 2.2 0z"/>
            </svg>
            <span>Instagram</span>
          </a>

          <a class="social-link" href="https://t.me/bunkeramira" target="_blank" rel="noopener noreferrer" aria-label="Telegram">
            <svg viewBox="0 0 24 24" class="icon" aria-hidden="true">
              <path d="M21.8 4.6 3.6 11.7c-1.2.5-1.2 1.2-.2 1.5l4.7 1.5 1.8 5.4c.2.6.1.8.7.8.5 0 .7-.2 1-.5l2.3-2.2 4.8 3.5c.9.5 1.5.2 1.7-.8l3.1-14.7c.3-1.2-.4-1.7-1.7-1.2zM9.2 14.3l9.6-6c.5-.3 1-.1.6.2l-7.8 7.1-.3 3.6-1.9-5z"/>
            </svg>
            <span>Telegram</span>
          </a>

          <a class="social-link" href="https://github.com/Amir22we" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
            <svg viewBox="0 0 24 24" class="icon" aria-hidden="true">
              <path d="M12 .8a11.3 11.3 0 0 0-3.6 22c.6.1.8-.2.8-.6v-2.2c-3.2.7-3.8-1.4-3.8-1.4-.5-1.2-1.2-1.5-1.2-1.5-1-.7.1-.7.1-.7 1.1.1 1.7 1.1 1.7 1.1 1 .1 1.6-.8 1.6-.8.2-.7.6-1.1 1-1.3-2.6-.3-5.2-1.3-5.2-5.8 0-1.3.5-2.4 1.2-3.2-.1-.3-.5-1.5.1-3.1 0 0 1-.3 3.3 1.2a11 11 0 0 1 6 0C17 2.8 18 3.1 18 3.1c.6 1.6.2 2.8.1 3.1.8.8 1.2 1.9 1.2 3.2 0 4.5-2.6 5.5-5.2 5.8.6.5 1.1 1.3 1.1 2.6v3.4c0 .4.2.7.8.6A11.3 11.3 0 0 0 12 .8z"/>
            </svg>
            <span>GitHub</span>
          </a>
        </div>
      </div>
    </div>
  </footer>

  <script src="{% static 'scripts/base.js' %}"></script>
  {% block extra_js %}{% endblock %}
</body>
</html>
